#!/bin/bash
# Script de actualizaciÃ³n manual simplificado

echo "=========================================="
echo "ActualizaciÃ³n Manual - Radio UPEC"
echo "=========================================="
echo ""
echo "Este script te guiarÃ¡ paso a paso"
echo ""

# Primera Raspberry Pi
echo "ðŸ“¡ DISPOSITIVO 1: raspberry@172.20.248.102"
echo ""
echo "Paso 1: Conectarse y encontrar el archivo"
echo "Ejecuta estos comandos UNO POR UNO:"
echo ""
echo "ssh raspberry@172.20.248.102"
echo "pwd"
echo "ls -la"
echo "find ~ -name 'client.py' 2>/dev/null"
echo "systemctl status radio-client | grep 'Loaded:'"
echo ""
echo "Copia la ruta donde estÃ¡ client.py y pÃ©gala aquÃ­:"
read -p "Ruta completa del directorio (ej: /home/raspberry): " DIR1

echo ""
echo "Paso 2: Copiar el archivo actualizado"
echo "Ejecuta este comando:"
echo ""
echo "scp client.py raspberry@172.20.248.102:$DIR1/"
echo ""
read -p "Presiona ENTER cuando hayas copiado el archivo..."

echo ""
echo "Paso 3: Reiniciar el servicio"
echo "Ejecuta:"
echo ""
echo "ssh raspberry@172.20.248.102 'sudo systemctl restart radio-client'"
echo ""
read -p "Presiona ENTER cuando hayas reiniciado el servicio..."

echo ""
echo "âœ… Dispositivo 1 completado"
echo ""
echo "=========================================="
echo ""

# Segunda Raspberry Pi
echo "ðŸ“¡ DISPOSITIVO 2: raspberry2@172.20.228.207"
echo ""
echo "Paso 1: Conectarse y encontrar el archivo"
echo "Ejecuta estos comandos UNO POR UNO:"
echo ""
echo "ssh raspberry2@172.20.228.207"
echo "pwd"
echo "ls -la"
echo "find ~ -name 'client.py' 2>/dev/null"
echo "systemctl status radio-client | grep 'Loaded:'"
echo ""
echo "Copia la ruta donde estÃ¡ client.py y pÃ©gala aquÃ­:"
read -p "Ruta completa del directorio (ej: /home/raspberry2): " DIR2

echo ""
echo "Paso 2: Copiar el archivo actualizado"
echo "Ejecuta este comando:"
echo ""
echo "scp client.py raspberry2@172.20.228.207:$DIR2/"
echo ""
read -p "Presiona ENTER cuando hayas copiado el archivo..."

echo ""
echo "Paso 3: Reiniciar el servicio"
echo "Ejecuta:"
echo ""
echo "ssh raspberry2@172.20.228.207 'sudo systemctl restart radio-client'"
echo ""
read -p "Presiona ENTER cuando hayas reiniciado el servicio..."

echo ""
echo "=========================================="
echo "âœ… Â¡ACTUALIZACIÃ“N COMPLETADA!"
echo "=========================================="
echo ""
echo "Verifica en el panel admin: http://localhost:3000"
echo "DeberÃ­as ver ahora el usuario correcto en cada dispositivo"
echo ""
